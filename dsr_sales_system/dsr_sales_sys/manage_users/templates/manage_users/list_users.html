
{% extends 'configs/base.html' %}
{% load widget_tweaks %}
{% block mainContent %}

<style>

    .htmx-indicator{
        opacity:0;
        transition: opacity 500ms ease-in;
    }
    .htmx-request .htmx-indicator{
        opacity:1
    }
    .htmx-request.htmx-indicator{
        opacity:1
    }
 .modal-backdrop.fade.show{
   display:none;
 }
</style>
 <div class="content-wrapper">
            <div class="row">
              <div class="col-sm-12">
                <div class="home-tab">
                  <div class="d-sm-flex align-items-center justify-content-between border-bottom">
                    
                   {% include 'manage_users/tab_nav.html' %}	
                  </div>
                  <div class="tab-content tab-content-basic">
                    <div class="tab-pane fade show active" id="user-profile" role="tabpanel" aria-labelledby="overview">
                      <div class="row">

    
    <h4 class="mb-3">Registered Users</h4>
    <table class="table table-striped table-hover" style="zoom:80%">
        <thead class="table-dark">
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Role</th>
                <th>Activated</th>
                <th>Date Registered</th>
                <th>Full Name</th>
                <th>DOB</th>
                <th>Region</th>
                <th>ID</th>
                <th>Photo</th>
                <th>View Details</th>
                <th>Update Details</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.role }}</td>
                <td>
                    {% if user.is_activated %}
                        <span class="badge bg-success">Active</span>
                    {% else %}
                        <span class="badge bg-secondary">Inactive</span>
                    {% endif %}
                </td>
                <td>{{ user.date_of_registration|date:"Y-m-d H:i" }}</td>
                <td>{{ user.profile.full_name }}</td>
                <td>{{ user.profile.date_of_birth|date:"Y-m-d" }}</td>
                <td>{{ user.profile.region }}</td>
                <td>
                    {% if user.profile.id_upload %}
                        <a href="{{ user.profile.id_upload.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View ID</a>
                    {% else %}
                        <span class="text-muted">N/A</span>
                    {% endif %}
                </td>
                <td>
                    {% if user.profile.photo %}
                        <img src="{{ user.profile.photo.url }}" alt="Photo" class="img-thumbnail" style="max-width: 60px;">
                    {% else %}
                        <span class="text-muted">N/A</span>
                    {% endif %}
                </td>
                <td>
        <!-- ðŸ”— View Details button -->
                        <a 
                        href="{% url 'user-detail' user.id %}" 
                     
                        class="btn btn-sm btn-info text-white">
                        <i class="mdi mdi-eye"></i> View
                        </a>
      </td>

      <td>
        <!-- ðŸ”— Add update link -->
        <a class="btn btn-sm btn-primary"
           href="{% url 'update-user' user.id %}"
           hx-boost="true">
          <i class="mdi mdi-account-edit"></i> Update
        </a>
      </td>

            </tr>
            {% empty %}
            <tr>
                <td colspan="10" class="text-center text-muted">No users registered yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>


                      

                      </div>
                    </div>
                 </div>
                </div>
              </div>
            </div>
          </div>
<script>
function togglePassword(inputId, el) {
  const input = document.getElementById(inputId);
  const icon = el.querySelector("i");
  if (input.type === "password") {
    input.type = "text";
    icon.classList.replace("mdi-eye", "mdi-eye-off");
  } else {
    input.type = "password";
    icon.classList.replace("mdi-eye-off", "mdi-eye");
  }
}
</script>
{% endblock mainContent %}



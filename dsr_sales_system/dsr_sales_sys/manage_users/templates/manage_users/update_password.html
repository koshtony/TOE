
{% extends 'configs/base.html' %}
{% load widget_tweaks %}
{% block mainContent %}

<style>

    .htmx-indicator{
        opacity:0;
        transition: opacity 500ms ease-in;
    }
    .htmx-request .htmx-indicator{
        opacity:1
    }
    .htmx-request.htmx-indicator{
        opacity:1
    }
 .modal-backdrop.fade.show{
   display:none;
 }
</style>
 <div class="content-wrapper">
            <div class="row">
              <div class="col-sm-12">
                <div class="home-tab">
                  <div class="d-sm-flex align-items-center justify-content-between border-bottom">

                    {% include 'manage_users/tab_nav.html' %}
                   
                  </div>
                  <div class="tab-content tab-content-basic">
                    <div class="tab-pane fade show active" id="create-user" role="tabpanel" aria-labelledby="overview">
                      <div class="row">


   
<div class="card shadow-lg border-0 rounded-4 p-4" style="max-width: 600px; margin:auto; background: #f8f9fa; zoom:80%;">
  <h3 class="text-center mb-4 fw-bold text-primary">ðŸ”‘ Update Password</h3>

  <form method="POST"
        hx-post="{% url 'update-password' %}"
        hx-target="#passwordResp"
        hx-indicator="#pwdSpinner">
    {% csrf_token %}

    <!-- Old Password -->
    <div class="mb-3 position-relative">
      <label for="id_old_password" class="form-label fw-medium">Current Password</label>
      <input type="password" name="old_password" class="form-control form-control-lg pe-5"
             id="id_old_password" placeholder="Enter current password">
      <span class="position-absolute top-50 end-0 translate-middle-y me-3"
            onclick="togglePassword('id_old_password', this)"
            style="cursor:pointer;">
        <i class="mdi mdi-eye fs-4 text-muted"></i>
      </span>
      <div class="text-danger small">{{ form.old_password.errors }}</div>
    </div>

    <!-- New Password -->
    <div class="mb-3 position-relative">
      <label for="id_new_password1" class="form-label fw-medium">New Password</label>
      <input type="password" name="new_password1" class="form-control form-control-lg pe-5"
             id="id_new_password1" placeholder="Enter new password">
      <span class="position-absolute top-50 end-0 translate-middle-y me-3"
            onclick="togglePassword('id_new_password1', this)"
            style="cursor:pointer;">
        <i class="mdi mdi-eye fs-4 text-muted"></i>
      </span>
      <div class="text-danger small">{{ form.new_password1.errors }}</div>
    </div>

    <!-- Confirm Password -->
    <div class="mb-4 position-relative">
      <label for="id_new_password2" class="form-label fw-medium">Confirm New Password</label>
      <input type="password" name="new_password2" class="form-control form-control-lg pe-5"
             id="id_new_password2" placeholder="Confirm new password">
      <span class="position-absolute top-50 end-0 translate-middle-y me-3"
            onclick="togglePassword('id_new_password2', this)"
            style="cursor:pointer;">
        <i class="mdi mdi-eye fs-4 text-muted"></i>
      </span>
      <div class="text-danger small">{{ form.new_password2.errors }}</div>
    </div>

    <!-- Submit -->
    <div class="d-grid">
      <button type="submit" class="btn btn-primary btn-lg fw-semibold">
        <span>Update Password</span>
        <span id="pwdSpinner" class="spinner-border spinner-border-sm ms-2 htmx-indicator" role="status"></span>
      </button>
    </div>

    <br>
    <div id="passwordResp" class="text-center fw-semibold"></div>
  </form>
</div>

<script>
function togglePassword(inputId, el) {
  let input = document.getElementById(inputId);
  let icon = el.querySelector("i");
  if (input.type === "password") {
    input.type = "text";
    icon.classList.replace("mdi-eye", "mdi-eye-off");
  } else {
    input.type = "password";
    icon.classList.replace("mdi-eye-off", "mdi-eye");
  }
}
</script>

    <!-- ðŸ”¹ HTMX Form -->
             

                      </div>
                    </div>
                 </div>
                </div>
              </div>
            </div>
          </div>
<script>
function togglePassword(inputId, el) {
  const input = document.getElementById(inputId);
  const icon = el.querySelector("i");
  if (input.type === "password") {
    input.type = "text";
    icon.classList.replace("mdi-eye", "mdi-eye-off");
  } else {
    input.type = "password";
    icon.classList.replace("mdi-eye-off", "mdi-eye");
  }
}
</script>
{% endblock mainContent %}


